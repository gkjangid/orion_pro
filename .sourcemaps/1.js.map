{"version":3,"sources":["../../src/pages/learning-journal/learning-journal.module.ts","../../src/pages/learning-journal/learning-journal.ts","../../src/models.ts"],"names":[],"mappings":"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","file":"1.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LearningJournalPage } from './learning-journal';\nimport { ComponentsModule }    from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    LearningJournalPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LearningJournalPage),\n    ComponentsModule,\n  ],\n})\nexport class LearningJournalPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/learning-journal/learning-journal.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams } from 'ionic-angular';\nimport { ToastController, LoadingController  } from 'ionic-angular';\nimport { ApiProvider } from '../../providers/api/api';\nimport { Activity, Question as ActivityQuestion } from '../../models';\nimport { UtilsProvider } from '../../providers/utils/utils';\n\n\nclass LearningJournal implements Partial<ILearningJournal> {\n  id:           number = null;\n  title:        string = '';\n  text:         string = '';\n  questions:    ILearningJournalQuestion[] = [];\n}\n\nclass LearningJournalQuestion implements ILearningJournalQuestion {\n  text: string;\n}\n\n@IonicPage()\n@Component({\n  selector:    'page-learning-journal',\n  templateUrl: 'learning-journal.html',\n})\nexport class LearningJournalPage {\n\n  appFeatures:  { [name: string] : boolean } = {};\n  data:         ILearningJournal = {} as any;\n  error:        string           = '';\n  segment:      string           = 'notes';\n\n  constructor(\n      public api:         ApiProvider,\n      public navCtrl:     NavController,\n      public navParams:   NavParams,\n      public toastCtrl:   ToastController,\n      public loadingCtrl: LoadingController,\n      public utils:       UtilsProvider,\n  ){}\n\n  addQuestion(): void {\n    try {\n      if (\n        this.data.questions.length\n        && !this.data.questions [this.data.questions.length - 1].text.trim()\n      ){ return; }\n    } catch( e ){ return; }\n\n    this.data.questions.push( new LearningJournalQuestion() );\n  }\n\n  createActivity(): void {\n    const activity = this.newActivity( this.data );\n    const data     = JSON.stringify( activity );\n    if ( !this.data.id ){\n      throw( 'Invalid Learning Journal ID' );\n    }\n    const loading = this.utils.loading( 'Creating Activity...' );\n    this.api.postLearningJournalActivity( this.data.id, { data } ).subscribe( response => {\n      loading.dismiss();\n      this.api.refreshData();\n\n      const options = { buttons: [{\n        text: 'Close',\n        role: 'cancel',\n        handler: () => {\n          setTimeout( () => this.navCtrl.pop(), 500 );\n        }\n      }]};\n      const alert = this.utils.alert( `Activity ${ response.data.title } created`, options, false );\n      setTimeout( () => alert.present(), 500 );\n    });\n  }\n\n  featureEnabled( name: string ): boolean {\n    const feature = this.appFeatures [name];\n    if ( feature === undefined ){\n      return true;\n    }\n    return feature;\n  }\n\n  getAppFeatures(): void {\n    this.api.getAppFeature().subscribe( response => {\n      response.data.map( item => {\n        this.appFeatures [item.name] = item.enabled;\n      });\n    });\n  }\n\n  ionViewDidEnter(): void {\n    this.data = this.navParams.get( 'learningJournal' ) || new LearningJournal();\n    this.getAppFeatures();\n    setTimeout( this.resizeAllTextareas );\n  }\n\n  newActivity( data: ILearningJournal ): Activity {\n    const activity            = new Activity();\n    activity.title            = data.title;\n    activity.briefDescription = 'Please complete the following questions';\n    activity.description      = data.title;\n    activity.status           = 'Published';\n    activity.username         = this.api.user.userName;\n\n    data.questions.map( ( item, index ) => {\n      const question = new ActivityQuestion();\n      question.question       = item.text;\n      question.questionOrder  = ( index + 1 ) * 10;\n      question.questionType   = 'noAutoCorrection';\n      activity.questions.push( question );\n    });\n\n    return activity;\n  }\n\n  resizeAllTextareas(): void {\n    let element: any;\n    for ( element of Array.from( document.querySelectorAll( '.question textarea' ) ) ){\n      if ( element.scrollHeight ){\n          element.style.height = `${element.scrollHeight}px`;\n      }\n    }\n  }\n\n  resizeTextarea( index?: number ): void {\n    if ( !index ){\n      return this.resizeAllTextareas();\n    }\n\n    const elements = Array.from( document.querySelectorAll( '.question textarea' ) );\n    let element: any = elements [index];\n    element.style.height = `${element.scrollHeight}px`;\n  }\n\n  saveJournal(){\n    const loader = this.utils.loading( 'Saving journal...' );\n    const data = JSON.stringify( this.data );\n    this.api.postLearningJournal( this.data.id, { data } ).subscribe( response => {\n      loader.dismiss();\n      this.data.id = response.data.id;\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/learning-journal/learning-journal.ts","\ninterface QuestionTableValidation {\n  validationType: string,\n  cells:          string[];\n  priority?:      string;\n}\n\nexport const BackboneTypes: string[] = [\n  'activity',\n  'job',\n  'intelligence',\n  ];\n\nexport class Activity {\n  ageGroups:          string[]    = [];\n  backboneType:       string      = BackboneTypes[0];\n  cities:             string[]    = [ 'Singapore' ];\n  contexts:           string[]    = [];\n  coach:              string      = '';\n  id:                 number      = null;\n  jobs:               string[]    = [];\n  locations:          string[]    = [];\n  outcomes:           Outcome[]   = [];\n  private:            boolean     = true;\n  questions:          Question[]  = [];\n  status:             string      = 'Draft';\n  title:              string      = '';\n  username:           string      = '';\n  briefDescription:   string      = '';\n  description:        string      = '';\n\n  constructor(){\n    this.outcomes = [\n      new Outcome(),\n      new Outcome(),\n      new Outcome(),\n    ];\n  }\n}\n\nexport class Choice {\n  choice:     string;\n  isCorrect:  boolean;\n  feedback:   string;\n  order:      number = 999;\n}\n\nexport class Outcome {\n  category: string;\n  verb:     string;\n  text:     string;\n}\n\nexport class Question {\n  id:             number;\n  ageGroups:      string[] = [];\n  checker:        string   = '';\n  choices:        Choice[] = [];\n  question:       string   = '';\n  questionOrder:  number   = 999;\n  subjects:       string[] = [];\n  table:          QuestionTable;\n  questionType:   string   = '';\n\n  constructor(){\n    this.id     = new Date().valueOf();\n    this.table  = new QuestionTable();\n  }\n}\n\nexport class QuestionTable {\n  rows:             QuestionTableRowColumn[]    = [];\n  columns:          QuestionTableRowColumn[]    = [];\n  cellValidations:  QuestionTableValidation[][] = [];\n}\n\nexport class QuestionTableRowColumn {\n  name:           number;\n  label:          string = '';\n  dataType:       string = '';\n  validation:     QuestionTableValidation = null;\n\n  constructor(){\n    this.name = new Date().valueOf();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/models.ts"],"sourceRoot":""}
{"version":3,"sources":["../../src/pages/messaging/messaging.module.ts","../../src/pages/messaging/messaging.ts"],"names":[],"mappings":"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","file":"9.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule }  from 'ionic-angular';\nimport { MessagingPage }    from './messaging';\nimport { ComponentsModule } from '../../components/components.module';\n\n@NgModule({\n  declarations: [\n    MessagingPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MessagingPage),\n    ComponentsModule,\n  ],\n})\nexport class MessagingPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/messaging/messaging.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController } from 'ionic-angular';\nimport { ApiProvider }    from '../../providers/api/api';\nimport { UtilsProvider }  from '../../providers/utils/utils';\n\n\n@IonicPage()\n@Component({\n  selector:    'page-messaging',\n  templateUrl: 'messaging.html',\n})\nexport class MessagingPage {\n\n  readonly columns: object[] = [\n    { name:'title',           label: 'Activity' },\n    { name:'inviterUsername', label: 'Inviter' },\n    { name:'created',         label: 'Date Invited' },\n  ];\n\n  readonly groups: string[] = [\n    'KCT-Messaging',\n    'KCT-Coach',\n  ];\n\n  invitations:  any[]  = [];\n  selfEnrolled: any[]  = [];\n  sortColumn:   string = 'date_completed';\n\n  constructor(\n    public api:           ApiProvider,\n    public navCtrl:       NavController,\n    public utils:         UtilsProvider,\n  ){}\n\n  getInvitations(): void {\n    this.api.getMessagingActivities( this.api.user ).subscribe( response => {\n      this.invitations = response.data.map( item => {\n        item.title = item.activity.title;\n        item.inviterUsername = item.inviter.username;\n\n        const invitees  = item.invitees;\n        const users     = Object.keys( invitees.completed );\n        const completed = users.filter( item => !!invitees.completed [item] );\n        item.completed = `${completed.length} / ${users.length}`;\n        return item;\n      });\n    });\n  }\n\n  ionViewDidEnter(): void {\n    if ( !this.utils.canAccessPage( this.groups, this.api.user ) ){\n      this.navCtrl.setRoot( 'HomePage' );\n      return;\n    }\n    this.getInvitations();\n  }\n\n  chatPage( invitation: any ): void {\n    this.api.getInvitationTeams( invitation.id ).subscribe( data => {\n      this.navCtrl.push( 'ChatPage', { invitation, teams: data.teams } );\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/messaging/messaging.ts"],"sourceRoot":""}